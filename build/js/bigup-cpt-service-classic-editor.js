(()=>{"use strict";(()=>{const e=setInterval((()=>{"complete"===document.readyState&&(clearInterval(e),(()=>{const e=".image-preview",t=".meta-image",l=document.querySelector(".image-upload"),r=document.querySelector(".image-remove");if(!l)return;let n;const i=e=>{for(;e.firstChild;)e.removeChild(e.lastChild)};l.addEventListener("click",(async o=>{o.preventDefault();const c=l.parentElement.parentElement.querySelector(e),a=l.parentElement.querySelector(t);n||(n=wp.media({title:"Select media to use as the profile image",button:{text:"Use this image"},multiple:!1}),n.on("select",(()=>{const e=n.state().get("selection").first().toJSON();console.log(e.id);const t=window.location.origin,l=e.url.replace(t,"");if(a.value=e.id,c.querySelector("img"))c.querySelector("img").setAttribute("src",l);else{const e=document.createElement("img");e.setAttribute("src",l),e.setAttribute("width","100px"),e.setAttribute("height","100px"),i(c),c.appendChild(e),r.style.display="block"}}))),n.open()})),r.addEventListener("click",(async l=>{l.preventDefault();const n=r.parentElement.parentElement.querySelector(e),o=r.parentElement.querySelector(t);i(n),o.value="",r.style.display="none"}))})())}),100)})()})();